import{s as D,n as H,r as et}from"../chunks/scheduler.xZJLFhf8.js";import{S as F,i as G,e as v,t as z,c as w,a as E,b as A,d as c,m as g,g as h,h as L,j as st,w as P,x as T,y,n as b,o as d,z as N,s as k,f as C,p as R,k as rt,l as U,A as J,B as K,C as at,q as x,u as tt,D as nt}from"../chunks/index.BLf1SSDG.js";import{T as lt,a as ot,G as it,P as ft,b as ut,e as Q,l as V}from"../chunks/TableRowTitle.DYTjaJsR.js";function ct(o){let e,n=W(o[0])+"",t,s;return{c(){e=v("span"),t=z(n),this.h()},l(l){e=w(l,"SPAN",{title:!0});var a=E(e);t=A(a,n),a.forEach(c),this.h()},h(){g(e,"title",s=o[0].toString())},m(l,a){h(l,e,a),L(e,t)},p(l,[a]){a&1&&n!==(n=W(l[0])+"")&&st(t,n),a&1&&s!==(s=l[0].toString())&&g(e,"title",s)},i:H,o:H,d(l){l&&c(e)}}}function W(o){return new Intl.NumberFormat(navigator.language??"en-US").format(o)}function mt(o,e,n){let{number:t}=e;return o.$$set=s=>{"number"in s&&n(0,t=s.number)},[t]}class pt extends F{constructor(e){super(),G(this,e,mt,ct,D,{number:0})}}function $t(o){let e,n,t;return e=new ft({props:{part:o[0].listeners,total:o[1]}}),{c(){P(e.$$.fragment),n=z(" of total listeners")},l(s){T(e.$$.fragment,s),n=A(s," of total listeners")},m(s,l){y(e,s,l),h(s,n,l),t=!0},p(s,l){const a={};l&1&&(a.part=s[0].listeners),l&2&&(a.total=s[1]),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){s&&c(n),N(e,s)}}}function ht(o){let e,n,t,s,l,a,i;return t=new ot({props:{title:o[0].name}}),a=new it({props:{size:o[2],$$slots:{default:[$t]},$$scope:{ctx:o}}}),{c(){e=v("td"),n=v("p"),P(t.$$.fragment),s=k(),l=v("p"),P(a.$$.fragment),this.h()},l(r){e=w(r,"TD",{class:!0});var f=E(e);n=w(f,"P",{class:!0});var _=E(n);T(t.$$.fragment,_),_.forEach(c),s=C(f),l=w(f,"P",{class:!0});var p=E(l);T(a.$$.fragment,p),p.forEach(c),f.forEach(c),this.h()},h(){g(n,"class","svelte-11pyj5k"),g(l,"class","svelte-11pyj5k"),g(e,"class","svelte-11pyj5k")},m(r,f){h(r,e,f),L(e,n),y(t,n,null),L(e,s),L(e,l),y(a,l,null),i=!0},p(r,f){const _={};f&1&&(_.title=r[0].name),t.$set(_);const p={};f&4&&(p.size=r[2]),f&11&&(p.$$scope={dirty:f,ctx:r}),a.$set(p)},i(r){i||(b(t.$$.fragment,r),b(a.$$.fragment,r),i=!0)},o(r){d(t.$$.fragment,r),d(a.$$.fragment,r),i=!1},d(r){r&&c(e),N(t),N(a)}}}function _t(o){let e,n;return e=new lt({props:{$$slots:{default:[ht]},$$scope:{ctx:o}}}),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,[s]){const l={};s&15&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function gt(o,e,n){let t,{artist:s}=e,{totalListeners:l}=e;return o.$$set=a=>{"artist"in a&&n(0,s=a.artist),"totalListeners"in a&&n(1,l=a.totalListeners)},o.$$.update=()=>{o.$$.dirty&3&&n(2,t=Math.round(s.listeners*100/l))},[s,l,t]}class bt extends F{constructor(e){super(),G(this,e,gt,_t,D,{artist:0,totalListeners:1})}}function X(o,e,n){const t=o.slice();return t[4]=e[n],t}function Y(o){let e,n,t,s,l,a,i;return t=new pt({props:{number:o[1].totalListeners}}),a=new ut({props:{$$slots:{default:[dt]},$$scope:{ctx:o}}}),{c(){e=v("p"),n=z(`The selected artists have a combined total of
        `),P(t.$$.fragment),s=z(" listeners."),l=k(),P(a.$$.fragment),this.h()},l(r){e=w(r,"P",{class:!0});var f=E(e);n=A(f,`The selected artists have a combined total of
        `),T(t.$$.fragment,f),s=A(f," listeners."),f.forEach(c),l=C(r),T(a.$$.fragment,r),this.h()},h(){g(e,"class","svelte-vsesf8")},m(r,f){h(r,e,f),L(e,n),y(t,e,null),L(e,s),h(r,l,f),y(a,r,f),i=!0},p(r,f){const _={};f&2&&(_.number=r[1].totalListeners),t.$set(_);const p={};f&130&&(p.$$scope={dirty:f,ctx:r}),a.$set(p)},i(r){i||(b(t.$$.fragment,r),b(a.$$.fragment,r),i=!0)},o(r){d(t.$$.fragment,r),d(a.$$.fragment,r),i=!1},d(r){r&&(c(e),c(l)),N(t),N(a,r)}}}function Z(o){let e,n;return e=new bt({props:{artist:o[4],totalListeners:o[1].totalListeners}}),{c(){P(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,s){y(e,t,s),n=!0},p(t,s){const l={};s&2&&(l.artist=t[4]),s&2&&(l.totalListeners=t[1].totalListeners),e.$set(l)},i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){N(e,t)}}}function dt(o){let e,n,t=Q(o[1].artists),s=[];for(let a=0;a<t.length;a+=1)s[a]=Z(X(o,t,a));const l=a=>d(s[a],1,1,()=>{s[a]=null});return{c(){for(let a=0;a<s.length;a+=1)s[a].c();e=R()},l(a){for(let i=0;i<s.length;i+=1)s[i].l(a);e=R()},m(a,i){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(a,i);h(a,e,i),n=!0},p(a,i){if(i&2){t=Q(a[1].artists);let r;for(r=0;r<t.length;r+=1){const f=X(a,t,r);s[r]?(s[r].p(f,i),b(s[r],1)):(s[r]=Z(f),s[r].c(),b(s[r],1),s[r].m(e.parentNode,e))}for(tt(),r=t.length;r<s.length;r+=1)l(r);x()}},i(a){if(!n){for(let i=0;i<t.length;i+=1)b(s[i]);n=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)d(s[i]);n=!1},d(a){a&&c(e),nt(s,a)}}}function vt(o){let e,n,t,s,l,a="Add artist",i,r,f="Popularity contest.",_,p,M="Check how much more or less popular are certain artists relative to others.",j,S,B,I,O,m=o[1].artists.length>0&&Y(o);return{c(){e=k(),n=v("form"),t=v("input"),s=k(),l=v("button"),l.textContent=a,i=k(),r=v("p"),r.textContent=f,_=k(),p=v("p"),p.textContent=M,j=k(),m&&m.c(),S=R(),this.h()},l(u){rt("svelte-1orq9rc",document.head).forEach(c),e=C(u),n=w(u,"FORM",{});var q=E(n);t=w(q,"INPUT",{type:!0,placeholder:!0,class:!0}),s=C(q),l=w(q,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),U(l)!=="svelte-cv9rih"&&(l.textContent=a),q.forEach(c),i=C(u),r=w(u,"P",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-17hqlhj"&&(r.textContent=f),_=C(u),p=w(u,"P",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-1keig3r"&&(p.textContent=M),j=C(u),m&&m.l(u),S=R(),this.h()},h(){document.title="Popularity contest | Last.fm Tools",g(t,"type","text"),g(t,"placeholder","Artist name"),g(t,"class","svelte-vsesf8"),g(l,"type","submit"),g(l,"class","svelte-vsesf8"),g(r,"class","svelte-vsesf8"),g(p,"class","svelte-vsesf8")},m(u,$){h(u,e,$),h(u,n,$),L(n,t),J(t,o[0]),L(n,s),L(n,l),h(u,i,$),h(u,r,$),h(u,_,$),h(u,p,$),h(u,j,$),m&&m.m(u,$),h(u,S,$),B=!0,I||(O=[K(t,"input",o[3]),K(n,"submit",at(o[2]))],I=!0)},p(u,[$]){$&1&&t.value!==u[0]&&J(t,u[0]),u[1].artists.length>0?m?(m.p(u,$),$&2&&b(m,1)):(m=Y(u),m.c(),b(m,1),m.m(S.parentNode,S)):m&&(tt(),d(m,1,1,()=>{m=null}),x())},i(u){B||(b(m),B=!0)},o(u){d(m),B=!1},d(u){u&&(c(e),c(n),c(i),c(r),c(_),c(p),c(j),c(S)),m&&m.d(u),I=!1,et(O)}}}function wt(o,e,n){let t,s={artists:[],totalListeners:0};async function l(){const i=await V.artist.getCorrection(t),r=await V.artist.getInfo(i);n(1,s={artists:[...s.artists,r],totalListeners:s.totalListeners+r.listeners}),console.log(s),n(0,t="")}function a(){t=this.value,n(0,t)}return[t,s,l,a]}class Pt extends F{constructor(e){super(),G(this,e,wt,vt,D,{})}}export{Pt as component};
