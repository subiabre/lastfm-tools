var wt=Object.defineProperty;var Tt=(e,t,a)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var ut=(e,t,a)=>Tt(e,typeof t!="symbol"?t+"":t,a);import{x as Ct,y as Pt,p as et,h as yt,s as Z,n as I,k as $t,r as Et}from"../chunks/scheduler.xZJLFhf8.js";import{u as lt,o as R,q as ot,n as B,S as x,i as tt,e as w,t as z,c as T,a as S,b as N,d as k,m as C,g as O,h as d,j as X,w as K,x as W,r as ft,y as J,z as Q,s as D,f as M,p as st,k as It,l as q,A as H,B as ht,C as nt,D as St,E as Ot,F as zt}from"../chunks/index.M7O5S-OT.js";function pt(e,t){const a=t.token={};function n(r,s,l,u){if(t.token!==a)return;t.resolved=u;let o=t.ctx;l!==void 0&&(o=o.slice(),o[l]=u);const b=r&&(t.current=r)(o);let i=!1;t.block&&(t.blocks?t.blocks.forEach((v,_)=>{_!==s&&v&&(lt(),R(v,1,1,()=>{t.blocks[_]===v&&(t.blocks[_]=null)}),ot())}):t.block.d(1),b.c(),B(b,1),b.m(t.mount(),t.anchor),i=!0),t.block=b,t.blocks&&(t.blocks[s]=b),i&&yt()}if(Ct(e)){const r=Pt();if(e.then(s=>{et(r),n(t.then,1,t.value,s),et(null)},s=>{if(et(r),n(t.catch,2,t.error,s),et(null),!t.hasCatch)throw s}),t.current!==t.pending)return n(t.pending,0),!0}else{if(t.current!==t.then)return n(t.then,1,t.value,e),!0;t.resolved=e}}function Nt(e,t,a){const n=t.slice(),{resolved:r}=e;e.current===e.then&&(n[e.value]=r),e.current===e.catch&&(n[e.error]=r),e.block.p(n,a)}function _t(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}class Bt{constructor(t){ut(this,"lastfm");this.lastfm=t}async getCorrection(t){const a=await this.lastfm.fetch(new URLSearchParams({method:"artist.getCorrection",artist:t}));if(typeof a.corrections.correction>"u")throw new Error("The artist you supplied could not be found");return a.corrections.correction.artist.name}async getInfo(t){const a=await this.lastfm.fetch(new URLSearchParams({method:"artist.getInfo",artist:t}));return{name:a.artist.name,playcount:parseInt(a.artist.stats.playcount),listeners:parseInt(a.artist.stats.listeners),url:a.artist.url,similar:a.artist.similar.artist.map(n=>n.name)}}async getTopTracks(t,a="10"){return(await this.lastfm.fetch(new URLSearchParams({method:"artist.getTopTracks",artist:t,limit:a}))).toptracks.track.map(r=>({title:r.name,playcount:parseInt(r.playcount),listeners:parseInt(r.listeners),url:r.url,rank:parseInt(r["@attr"].rank)}))}}const Lt="https://ws.audioscrobbler.com/2.0/";class Rt{async fetch(t){const a=new URLSearchParams({api_key:"046a32e1f0d5bd75aa99fb2e2a812eb9",format:"json"}),n=await fetch(Lt+"?"+a+"&"+t);if(n.status!==200)throw new Error("Bad Request");return await n.json()}}const rt={artist:new Bt(new Rt)};function Ut(e){let t=0;for(let a=0;a<e.length;a++){const n=e[a];t=t+n.playcount}return t}function At(e){let t,a=mt(e[0],e[1])+"",n,r,s;return{c(){t=w("span"),n=z(a),r=z("%"),this.h()},l(l){t=T(l,"SPAN",{title:!0});var u=S(t);n=N(u,a),r=N(u,"%"),u.forEach(k),this.h()},h(){C(t,"title",s=at(e[0])+" out of "+at(e[1]))},m(l,u){O(l,t,u),d(t,n),d(t,r)},p(l,[u]){u&3&&a!==(a=mt(l[0],l[1])+"")&&X(n,a),u&3&&s!==(s=at(l[0])+" out of "+at(l[1]))&&C(t,"title",s)},i:I,o:I,d(l){l&&k(t)}}}function at(e){return new Intl.NumberFormat(navigator.language??"en-US").format(e)}function mt(e,t){return(e*100/t).toFixed(2)}function Dt(e,t,a){let{part:n}=t,{total:r}=t;return e.$$set=s=>{"part"in s&&a(0,n=s.part),"total"in s&&a(1,r=s.total)},[n,r]}class gt extends x{constructor(t){super(),tt(this,t,Dt,At,Z,{part:0,total:1})}}function Mt(e){let t,a,n,r,s;return a=new gt({props:{total:e[1],part:e[0]}}),{c(){t=w("div"),K(a.$$.fragment),n=z("% "),r=z(e[2]),this.h()},l(l){t=T(l,"DIV",{style:!0,class:!0});var u=S(t);W(a.$$.fragment,u),n=N(u,"% "),r=N(u,e[2]),u.forEach(k),this.h()},h(){ft(t,"--bar-size",e[3]+"%"),ft(t,"--bar-color",e[4]),C(t,"class","svelte-1ty1bkl")},m(l,u){O(l,t,u),J(a,t,null),d(t,n),d(t,r),s=!0},p(l,[u]){const o={};u&2&&(o.total=l[1]),u&1&&(o.part=l[0]),a.$set(o),(!s||u&4)&&X(r,l[2])},i(l){s||(B(a.$$.fragment,l),s=!0)},o(l){R(a.$$.fragment,l),s=!1},d(l){l&&k(t),Q(a)}}}const Ft="#648fff80",qt="#785ef080",jt="#dc267f80",Ht="#fe610080",Vt="#ffb00080";function Gt(e,t,a){let{part:n}=t,{total:r}=t,{text:s}=t,l=u();function u(){return Math.round(n*100/r)}let o=b();function b(){return l>80?Vt:l>60?Ht:l>40?jt:l>20?qt:Ft}return e.$$set=i=>{"part"in i&&a(0,n=i.part),"total"in i&&a(1,r=i.total),"text"in i&&a(2,s=i.text)},[n,r,s,l,o]}class dt extends x{constructor(t){super(),tt(this,t,Gt,Mt,Z,{part:0,total:1,text:2})}}function Kt(e){let t,a=e[0].title+"",n,r;return{c(){t=w("span"),n=z(a),this.h()},l(s){t=T(s,"SPAN",{title:!0,class:!0});var l=S(t);n=N(l,a),l.forEach(k),this.h()},h(){C(t,"title",r=e[0].title),C(t,"class","svelte-13wazj3")},m(s,l){O(s,t,l),d(t,n)},p(s,[l]){l&1&&a!==(a=s[0].title+"")&&X(n,a),l&1&&r!==(r=s[0].title)&&C(t,"title",r)},i:I,o:I,d(s){s&&k(t)}}}function Wt(e,t,a){let{track:n}=t;return e.$$set=r=>{"track"in r&&a(0,n=r.track)},[n]}class Jt extends x{constructor(t){super(),tt(this,t,Wt,Kt,Z,{track:0})}}function Qt(e){let t,a,n,r,s=e[0].rank+"",l,u,o,b,i,v,_,P,f,U,c,h;return i=new Jt({props:{track:e[0]}}),P=new dt({props:{part:e[0].listeners,total:e[1].listeners,text:"of listeners"}}),c=new dt({props:{part:e[0].playcount,total:e[1].playcount,text:"of plays"}}),{c(){t=w("tr"),a=w("td"),n=w("p"),r=z("#"),l=z(s),u=D(),o=w("td"),b=w("p"),K(i.$$.fragment),v=D(),_=w("p"),K(P.$$.fragment),f=D(),U=w("p"),K(c.$$.fragment),this.h()},l(m){t=T(m,"TR",{class:!0});var p=S(t);a=T(p,"TD",{class:!0});var y=S(a);n=T(y,"P",{class:!0});var $=S(n);r=N($,"#"),l=N($,s),$.forEach(k),y.forEach(k),u=M(p),o=T(p,"TD",{class:!0});var E=S(o);b=T(E,"P",{class:!0});var j=S(b);W(i.$$.fragment,j),j.forEach(k),v=M(E),_=T(E,"P",{class:!0});var V=S(_);W(P.$$.fragment,V),V.forEach(k),f=M(E),U=T(E,"P",{class:!0});var Y=S(U);W(c.$$.fragment,Y),Y.forEach(k),E.forEach(k),p.forEach(k),this.h()},h(){C(n,"class","svelte-1865e99"),C(a,"class","svelte-1865e99"),C(b,"class","svelte-1865e99"),C(_,"class","svelte-1865e99"),C(U,"class","svelte-1865e99"),C(o,"class","svelte-1865e99"),C(t,"class","svelte-1865e99")},m(m,p){O(m,t,p),d(t,a),d(a,n),d(n,r),d(n,l),d(t,u),d(t,o),d(o,b),J(i,b,null),d(o,v),d(o,_),J(P,_,null),d(o,f),d(o,U),J(c,U,null),h=!0},p(m,[p]){(!h||p&1)&&s!==(s=m[0].rank+"")&&X(l,s);const y={};p&1&&(y.track=m[0]),i.$set(y);const $={};p&1&&($.part=m[0].listeners),p&2&&($.total=m[1].listeners),P.$set($);const E={};p&1&&(E.part=m[0].playcount),p&2&&(E.total=m[1].playcount),c.$set(E)},i(m){h||(B(i.$$.fragment,m),B(P.$$.fragment,m),B(c.$$.fragment,m),h=!0)},o(m){R(i.$$.fragment,m),R(P.$$.fragment,m),R(c.$$.fragment,m),h=!1},d(m){m&&k(t),Q(i),Q(P),Q(c)}}}function Xt(e,t,a){let{track:n}=t,{artist:r}=t;return e.$$set=s=>{"track"in s&&a(0,n=s.track),"artist"in s&&a(1,r=s.artist)},[n,r]}class Yt extends x{constructor(t){super(),tt(this,t,Xt,Qt,Z,{track:0,artist:1})}}const kt=["The Knack","Vanilla Ice","The Proclaimers","Bobby McFerrin","Falco","Spin Doctors","OMC","Charles & Eddie","The Rembrandts","Passenger","Gotye","Bonnie Lou","Duck Sauce","Foster the People","Rebecca Black","Icona Pop"];function Zt(){var e=Math.floor(Math.random()*kt.length);return kt[e]}function vt(e,t,a){const n=e.slice();return n[9]=t[a],n}function xt(e){let t,a='<a href="https://en.wikipedia.org/wiki/One-hit_wonder">One-hit wonder</a> calculator.',n,r,s,l,u,o,b;return{c(){t=w("p"),t.innerHTML=a,n=D(),r=w("p"),s=z(`Use this tool to analyze how much weight does an artist's top tracks
        hold against their total plays and listener counts. e.g: `),l=w("button"),u=z(e[3]),this.h()},l(i){t=T(i,"P",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-8qx1yd"&&(t.innerHTML=a),n=M(i),r=T(i,"P",{class:!0});var v=S(r);s=N(v,`Use this tool to analyze how much weight does an artist's top tracks
        hold against their total plays and listener counts. e.g: `),l=T(v,"BUTTON",{type:!0});var _=S(l);u=N(_,e[3]),_.forEach(k),v.forEach(k),this.h()},h(){C(t,"class","svelte-vfribz"),C(l,"type","button"),C(r,"class","svelte-vfribz")},m(i,v){O(i,t,v),O(i,n,v),O(i,r,v),d(r,s),d(r,l),d(l,u),o||(b=nt(l,"click",e[8]),o=!0)},p:I,i:I,o:I,d(i){i&&(k(t),k(n),k(r)),o=!1,b()}}}function te(e){let t,a,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:ne,then:ae,catch:ee,value:2,blocks:[,,,]};return pt(a=e[2],r),{c(){t=st(),r.block.c()},l(s){t=st(),r.block.l(s)},m(s,l){O(s,t,l),r.block.m(s,r.anchor=l),r.mount=()=>t.parentNode,r.anchor=t,n=!0},p(s,l){e=s,r.ctx=e,l&4&&a!==(a=e[2])&&pt(a,r)||Nt(r,e,l)},i(s){n||(B(r.block),n=!0)},o(s){for(let l=0;l<3;l+=1){const u=r.blocks[l];R(u)}n=!1},d(s){s&&k(t),r.block.d(s),r.token=null,r=null}}}function ee(e){return{c:I,l:I,m:I,p:I,i:I,o:I,d:I}}function ae(e){let t,a=e[2].artist.name+"",n,r,s=e[2].topTracks.length+"",l,u,o,b,i,v,_;o=new gt({props:{part:e[2].topTracksPlaycount,total:e[2].artist.playcount}});let P=_t(e[2].topTracks),f=[];for(let c=0;c<P.length;c+=1)f[c]=bt(vt(e,P,c));const U=c=>R(f[c],1,1,()=>{f[c]=null});return{c(){t=w("p"),n=z(a),r=z("'s top "),l=z(s),u=z(" has "),K(o.$$.fragment),b=z(" of their total plays."),i=D(),v=w("table");for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){t=T(c,"P",{class:!0});var h=S(t);n=N(h,a),r=N(h,"'s top "),l=N(h,s),u=N(h," has "),W(o.$$.fragment,h),b=N(h," of their total plays."),h.forEach(k),i=M(c),v=T(c,"TABLE",{class:!0});var m=S(v);for(let p=0;p<f.length;p+=1)f[p].l(m);m.forEach(k),this.h()},h(){C(t,"class","svelte-vfribz"),C(v,"class","svelte-vfribz")},m(c,h){O(c,t,h),d(t,n),d(t,r),d(t,l),d(t,u),J(o,t,null),d(t,b),O(c,i,h),O(c,v,h);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(v,null);_=!0},p(c,h){(!_||h&4)&&a!==(a=c[2].artist.name+"")&&X(n,a),(!_||h&4)&&s!==(s=c[2].topTracks.length+"")&&X(l,s);const m={};if(h&4&&(m.part=c[2].topTracksPlaycount),h&4&&(m.total=c[2].artist.playcount),o.$set(m),h&4){P=_t(c[2].topTracks);let p;for(p=0;p<P.length;p+=1){const y=vt(c,P,p);f[p]?(f[p].p(y,h),B(f[p],1)):(f[p]=bt(y),f[p].c(),B(f[p],1),f[p].m(v,null))}for(lt(),p=P.length;p<f.length;p+=1)U(p);ot()}},i(c){if(!_){B(o.$$.fragment,c);for(let h=0;h<P.length;h+=1)B(f[h]);_=!0}},o(c){R(o.$$.fragment,c),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)R(f[h]);_=!1},d(c){c&&(k(t),k(i),k(v)),Q(o),zt(f,c)}}}function bt(e){let t,a;return t=new Yt({props:{track:e[9],artist:e[2].artist}}),{c(){K(t.$$.fragment)},l(n){W(t.$$.fragment,n)},m(n,r){J(t,n,r),a=!0},p(n,r){const s={};r&4&&(s.track=n[9]),r&4&&(s.artist=n[2].artist),t.$set(s)},i(n){a||(B(t.$$.fragment,n),a=!0)},o(n){R(t.$$.fragment,n),a=!1},d(n){Q(t,n)}}}function ne(e){let t,a="Loading";return{c(){t=w("p"),t.textContent=a,this.h()},l(n){t=T(n,"P",{class:!0,"data-svelte-h":!0}),q(t)!=="svelte-1ed5rpo"&&(t.textContent=a),this.h()},h(){C(t,"class","svelte-vfribz")},m(n,r){O(n,t,r)},p:I,i:I,o:I,d(n){n&&k(t)}}}function se(e){let t,a,n,r,s,l,u="Top 5 tracks",o,b="Top 10 tracks",i,v="Top 20 tracks",_,P="Top 30 tracks",f,U="Top 50 tracks",c,h,m="Submit",p,y,$,E,j,V,Y;const ct=[te,xt],F=[];function it(g,L){return typeof g[2]<"u"?0:1}return y=it(e),$=F[y]=ct[y](e),{c(){t=D(),a=w("form"),n=w("input"),r=D(),s=w("select"),l=w("option"),l.textContent=u,o=w("option"),o.textContent=b,i=w("option"),i.textContent=v,_=w("option"),_.textContent=P,f=w("option"),f.textContent=U,c=D(),h=w("button"),h.textContent=m,p=D(),$.c(),E=st(),this.h()},l(g){It("svelte-1t7wyqk",document.head).forEach(k),t=M(g),a=T(g,"FORM",{});var A=S(a);n=T(A,"INPUT",{type:!0,placeholder:!0,class:!0}),r=M(A),s=T(A,"SELECT",{class:!0});var G=S(s);l=T(G,"OPTION",{"data-svelte-h":!0}),q(l)!=="svelte-1yizirg"&&(l.textContent=u),o=T(G,"OPTION",{"data-svelte-h":!0}),q(o)!=="svelte-16e41hb"&&(o.textContent=b),i=T(G,"OPTION",{"data-svelte-h":!0}),q(i)!=="svelte-13aq53"&&(i.textContent=v),_=T(G,"OPTION",{"data-svelte-h":!0}),q(_)!=="svelte-hwewjv"&&(_.textContent=P),f=T(G,"OPTION",{"data-svelte-h":!0}),q(f)!=="svelte-8e5bb3"&&(f.textContent=U),G.forEach(k),c=M(A),h=T(A,"BUTTON",{type:!0,"data-svelte-h":!0}),q(h)!=="svelte-1ou7dtz"&&(h.textContent=m),A.forEach(k),p=M(g),$.l(g),E=st(),this.h()},h(){document.title="One-hit wonder calculator | Last.fm Tools",C(n,"type","text"),C(n,"placeholder","Artist name"),C(n,"class","svelte-vfribz"),l.__value="5",H(l,l.__value),l.selected=!0,o.__value="10",H(o,o.__value),i.__value="20",H(i,i.__value),_.__value="30",H(_,_.__value),f.__value="50",H(f,f.__value),C(s,"class","svelte-vfribz"),e[1]===void 0&&$t(()=>e[7].call(s)),C(h,"type","submit")},m(g,L){O(g,t,L),O(g,a,L),d(a,n),H(n,e[0]),d(a,r),d(a,s),d(s,l),d(s,o),d(s,i),d(s,_),d(s,f),ht(s,e[1],!0),d(a,c),d(a,h),O(g,p,L),F[y].m(g,L),O(g,E,L),j=!0,V||(Y=[nt(n,"input",e[6]),nt(s,"change",e[7]),nt(a,"submit",St(e[4]))],V=!0)},p(g,[L]){L&1&&n.value!==g[0]&&H(n,g[0]),L&2&&ht(s,g[1]);let A=y;y=it(g),y===A?F[y].p(g,L):(lt(),R(F[A],1,1,()=>{F[A]=null}),ot(),$=F[y],$?$.p(g,L):($=F[y]=ct[y](g),$.c()),B($,1),$.m(E.parentNode,E))},i(g){j||(B($),j=!0)},o(g){R($),j=!1},d(g){g&&(k(t),k(a),k(p),k(E)),F[y].d(g),V=!1,Et(Y)}}}function re(e,t,a){const n=Zt();let r,s,l;async function u(){const _=await rt.artist.getCorrection(r);a(2,l=o(_))}async function o(_){const P=await rt.artist.getInfo(_),f=await rt.artist.getTopTracks(_,s);return{artist:P,topTracks:f,topTracksPlaycount:Ut(f)}}function b(){r=this.value,a(0,r)}function i(){s=Ot(this),a(1,s)}return[r,s,l,n,u,o,b,i,()=>a(2,l=o(n))]}class ie extends x{constructor(t){super(),tt(this,t,re,se,Z,{})}}export{ie as component};
